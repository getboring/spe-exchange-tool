import{c as p,e as O,r as t,j as e,R}from"./index-CPFkeXTL.js";import{u as _}from"./settings-store-V5ljlfDl.js";import{C as M}from"./confirm-modal-CNsLWem5.js";import{E as F,W as H,S as W}from"./constants-Cyhwx-4M.js";import{C as $}from"./check-Ca9kXC9N.js";import{S as B}from"./save-CvMSaUTB.js";import{T as I}from"./triangle-alert-Bfna1AUJ.js";const U=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],V=p("download",U);const Y=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],z=p("log-out",Y),g={none:0,starter:7.95,basic:27.95,premium:74.95,anchor:349.95};function ee(){const{ebayStoreType:l,promotedPercent:f,targetRoi:j,defaultWeight:b,defaultSellPlatform:v,syncing:N,lastSynced:i,setEbayStoreType:y,setPromotedPercent:S,setTargetRoi:C,setDefaultWeight:w,setDefaultSellPlatform:k,loadFromProfile:c,syncToProfile:m}=_(),{user:n,profile:a,signOut:P,fetchProfile:u}=O(),[x,o]=t.useState("idle"),[D,h]=t.useState(!1),[T,d]=t.useState(!1);t.useEffect(()=>{a&&c(a)},[a,c]);const E=t.useCallback(async()=>{if(n?.id){o("saving");try{await m(n.id),await u(),o("saved"),h(!1),setTimeout(()=>o("idle"),2e3)}catch{o("idle")}}},[n?.id,m,u]),r=t.useCallback(s=>{s(),h(!0)},[]),A=()=>{alert("Coming soon")},L=()=>{alert("Coming soon"),d(!1)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Settings"}),D&&e.jsx("button",{onClick:E,disabled:N,className:"flex items-center gap-2 rounded-lg bg-primary px-4 py-2 text-sm font-medium text-primary-foreground disabled:opacity-50",children:x==="saving"?e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"h-4 w-4 animate-spin"}),"Saving..."]}):x==="saved"?e.jsxs(e.Fragment,{children:[e.jsx($,{className:"h-4 w-4"}),"Saved!"]}):e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"h-4 w-4"}),"Save Changes"]})})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Seller Settings"}),e.jsxs("div",{className:"space-y-4 rounded-lg border p-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"eBay Store Type"}),e.jsx("select",{value:l,onChange:s=>r(()=>y(s.target.value)),className:"mt-1 w-full rounded-lg border bg-background px-3 py-2",children:F.map(s=>e.jsxs("option",{value:s,children:[s.charAt(0).toUpperCase()+s.slice(1),g[s]>0&&` ($${g[s]}/mo)`]},s))}),e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:l==="none"?"No store subscription - higher fees apply":`${l.charAt(0).toUpperCase()+l.slice(1)} store with reduced final value fees`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"Promoted Listing %"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("input",{type:"number",min:"0",max:"20",step:"0.5",value:f,onChange:s=>r(()=>S(Number(s.target.value))),className:"w-full rounded-lg border bg-background px-3 py-2 pr-8"}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:"%"})]}),e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Ad rate for promoted listings (0-20%). Leave at 0 if not using promoted."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"Target ROI %"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("input",{type:"number",min:"0",value:j,onChange:s=>r(()=>C(Number(s.target.value))),className:"w-full rounded-lg border bg-background px-3 py-2 pr-8"}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:"%"})]}),e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Minimum return on investment for deal recommendations."})]})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Defaults"}),e.jsxs("div",{className:"space-y-4 rounded-lg border p-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"Default Shipping Weight"}),e.jsx("select",{value:b,onChange:s=>r(()=>w(s.target.value)),className:"mt-1 w-full rounded-lg border bg-background px-3 py-2",children:H.map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Default weight for new items. Most games are 4-8oz."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"Default Sell Platform"}),e.jsx("select",{value:v,onChange:s=>r(()=>k(s.target.value)),className:"mt-1 w-full rounded-lg border bg-background px-3 py-2",children:W.map(s=>e.jsx("option",{value:s,children:s},s))})]})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Data"}),e.jsxs("div",{className:"space-y-4 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Export Data"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Download all your inventory and sales data as CSV"})]}),e.jsxs("button",{onClick:A,className:"flex items-center gap-2 rounded-lg border px-4 py-2 text-sm hover:bg-accent",children:[e.jsx(V,{className:"h-4 w-4"}),"Export"]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-destructive",children:"Clear All Data"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Permanently delete all inventory, deals, and scan history"})]}),e.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-2 rounded-lg border border-destructive/50 px-4 py-2 text-sm text-destructive hover:bg-destructive/10",children:[e.jsx(I,{className:"h-4 w-4"}),"Clear"]})]})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Account"}),e.jsxs("div",{className:"space-y-4 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:n?.email||"Not signed in"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a?.tier==="pro"?"Pro Account":"Free Account"})]}),a?.tier!=="pro"&&e.jsx("button",{className:"rounded-lg bg-gradient-to-r from-amber-500 to-orange-500 px-4 py-2 text-sm font-medium text-white",onClick:()=>alert("Pro upgrade coming soon!"),children:"Upgrade to Pro"})]}),i&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last synced: ",new Date(i).toLocaleString()]}),e.jsx("hr",{}),e.jsxs("button",{onClick:()=>P(),className:"flex w-full items-center justify-center gap-2 rounded-lg border px-4 py-2 text-destructive hover:bg-destructive/10",children:[e.jsx(z,{className:"h-4 w-4"}),"Sign Out"]})]})]}),e.jsx(M,{isOpen:T,title:"Clear All Data",message:"Are you sure you want to permanently delete all your inventory, deals, and scan history? This cannot be undone.",confirmLabel:"Clear All Data",onConfirm:L,onCancel:()=>d(!1)})]})}export{ee as SettingsPage};
