import{c as b,u as C,r as D,j as e,P as m,f as c,C as p,F as S,L as d,a as A}from"./index-CPFkeXTL.js";import{u as I}from"./inventory-store-D7GLjq0X.js";import{u as $}from"./deals-store-DHUgIiis.js";import{S as P}from"./shopping-bag-Ckpx03Rf.js";import{C as T}from"./circle-check-big-CZ38CVVF.js";import{D as y}from"./dollar-sign-c5L53ltU.js";import{T as N}from"./trending-up-Bb59yena.js";const L=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],v=b("arrow-right",L);const R=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],V=b("clock",R);function J(){const t=C(),{items:a,fetchItems:r}=I(),{deals:l,fetchDeals:x}=$();D.useEffect(()=>{r(),x()},[r,x]);const u=a.filter(s=>s.status==="in_stock").length,h=a.filter(s=>s.status==="listed").length,w=a.filter(s=>s.status==="sold").length,f=a.filter(s=>s.status==="sold").reduce((s,n)=>s+(n.actual_profit||0),0),k=a.filter(s=>s.status!=="sold").reduce((s,n)=>s+(n.estimated_value||0),0),g=[...a].sort((s,n)=>{const _=s.status==="sold"&&s.sale_date?new Date(s.sale_date):new Date(s.created_at);return(n.status==="sold"&&n.sale_date?new Date(n.sale_date):new Date(n.created_at)).getTime()-_.getTime()}).slice(0,5),j=l.filter(s=>s.status==="active").slice(0,3);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Dashboard"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-4",children:[e.jsx(o,{label:"In Stock",value:u.toString(),icon:m,color:"text-blue-600"}),e.jsx(o,{label:"Listed",value:h.toString(),icon:P,color:"text-amber-600"}),e.jsx(o,{label:"Sold",value:w.toString(),icon:T,color:"text-green-600"}),e.jsx(o,{label:"Profit",value:c(f),icon:y,color:f>=0?"text-green-600":"text-red-600"})]}),e.jsx("div",{className:"rounded-lg border bg-gradient-to-r from-primary/10 to-primary/5 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Inventory Value"}),e.jsx("p",{className:"text-3xl font-bold",children:c(k)}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[u+h," items"]})]}),e.jsx(N,{className:"h-12 w-12 text-primary/20"})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-4",children:[e.jsx(i,{to:"/scan",icon:p,label:"Scan Items",primary:!0}),e.jsx(i,{to:"/inventory",icon:m,label:"Inventory"}),e.jsx(i,{to:"/deals",icon:S,label:"Deals"}),e.jsx(i,{to:"/analytics",icon:N,label:"Analytics"})]})]}),j.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Active Deals"}),e.jsxs(d,{to:"/deals",className:"flex items-center gap-1 text-sm text-muted-foreground hover:text-foreground",children:["View all ",e.jsx(v,{className:"h-4 w-4"})]})]}),e.jsx("div",{className:"space-y-2",children:j.map(s=>e.jsx(E,{deal:s,onClick:()=>t(`/deals/${s.id}`)},s.id))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Recent Activity"}),e.jsxs(d,{to:"/inventory",className:"flex items-center gap-1 text-sm text-muted-foreground hover:text-foreground",children:["View all ",e.jsx(v,{className:"h-4 w-4"})]})]}),g.length>0?e.jsx("div",{className:"space-y-2",children:g.map(s=>e.jsx(M,{item:s,onClick:()=>t(`/inventory/${s.id}`)},s.id))}):e.jsxs("div",{className:"rounded-lg border p-6 text-center",children:[e.jsx(p,{className:"mx-auto h-10 w-10 text-muted-foreground"}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:"No activity yet"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Start by scanning some items!"}),e.jsx(d,{to:"/scan",className:"mt-4 inline-block rounded-lg bg-primary px-6 py-2 text-sm font-medium text-primary-foreground",children:"Scan Items"})]})]})]})}function o({label:t,value:a,icon:r,color:l}){return e.jsxs("div",{className:"rounded-lg border p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{className:`h-4 w-4 ${l}`}),e.jsx("span",{className:"text-sm text-muted-foreground",children:t})]}),e.jsx("p",{className:"mt-1 text-xl font-bold",children:a})]})}function i({to:t,icon:a,label:r,primary:l}){return e.jsxs(d,{to:t,className:`flex flex-col items-center gap-2 rounded-lg border p-4 transition-colors ${l?"border-primary bg-primary/5 hover:bg-primary/10":"hover:bg-accent"}`,children:[e.jsx(a,{className:`h-6 w-6 ${l?"text-primary":""}`}),e.jsx("span",{className:"text-sm font-medium",children:r})]})}function E({deal:t,onClick:a}){const r=t.itemCount?(t.soldCount||0)/t.itemCount*100:0,l=(t.estimated_value||0)-(t.total_cost||0);return e.jsxs("button",{onClick:a,className:"flex w-full items-center justify-between rounded-lg border p-3 text-left hover:bg-accent/50",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:t.source||"Unknown Source"}),e.jsxs("div",{className:"mt-1 flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsxs("span",{children:[t.soldCount||0,"/",t.itemCount||0," sold"]}),e.jsx("span",{children:"·"}),e.jsxs("span",{className:l>=0?"text-green-600":"text-red-600",children:[c(l)," est. profit"]})]})]}),e.jsxs("div",{className:"ml-4 w-16",children:[e.jsx("div",{className:"h-2 overflow-hidden rounded-full bg-muted",children:e.jsx("div",{className:"h-full rounded-full bg-primary transition-all",style:{width:`${r}%`}})}),e.jsxs("p",{className:"mt-1 text-right text-xs text-muted-foreground",children:[Math.round(r),"%"]})]})]})}function M({item:t,onClick:a}){const r=t.status==="sold",l=r&&t.sale_date?new Date(t.sale_date):new Date(t.created_at);return e.jsxs("button",{onClick:a,className:"flex w-full items-center gap-3 rounded-lg border p-3 text-left hover:bg-accent/50",children:[e.jsx("div",{className:`flex h-8 w-8 items-center justify-center rounded-full ${r?"bg-green-100 dark:bg-green-900":"bg-blue-100 dark:bg-blue-900"}`,children:r?e.jsx(y,{className:"h-4 w-4 text-green-600"}):e.jsx(m,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{className:"flex-1 overflow-hidden",children:[e.jsx("p",{className:"truncate font-medium",children:t.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r?e.jsxs("span",{className:"text-green-600",children:["Sold for ",c(t.sale_price)," · ",c(t.actual_profit)," profit"]}):e.jsxs("span",{children:["Added to inventory · ",c(t.estimated_value)]})})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(V,{className:"h-3 w-3"}),A(l)]})]})}export{J as DashboardPage};
